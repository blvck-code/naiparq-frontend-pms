<div class="naiparq-blog-create mt-[96px] min-h-[100vh]">
  <div class="content flex flex-col py-10 max-w-[1200px] px-3 mx-auto">
    <div class="flex justify-end items-center py-2 mb-2 gap-2">
      <button
        (click)="onSubmit()"
        [class.btn-loading]="submitting"
        class="px-5 max-w-[200px] naiparq-btn my-2 py-2 border-0 bg-[#000] rounded text-[#fff]"
      >
        <span class="btn-text text-[#fff] font-[700]">Publish</span>
      </button>
      <button
        (click)="togglePreview()"
        class="px-5 max-w-[200px] border naiparq-btn my-2 py-2 border-0 bg-[#fff] rounded text-[#000]"
      >
        <span class="btn-text text-[#000] font-base font-[700]">{{
          preview ? "Close" : "Preview"
        }}</span>
      </button>
    </div>

    <div
      [class.hidden]="!preview"
      class="naiparq-blog-create__preview pb-5 px-3 py-4 rounded-lg"
    >
      <h2
        class="text-[30px] leading-[120%] font-[700] text-[#2F1C6A]"
        *ngIf="!blogForm.get('title')?.value"
      >
        Preview Blog
      </h2>

      <!--    Blog Image -->
      <div
        *ngIf="coverImage"
        class="naiparq-blog-create__preview-img py-3 laptop:h-[585px] tabletLand:h-[250px] mobile:h-[250px] sm:h-[200px] overflow-hidden py-2"
      >
        <img
          class="rounded-2xl object-cover h-[100%]"
          [src]="coverImage"
          alt="Blog image"
        />
      </div>

      <div class="max-w-[900px] mx-auto py-3">
        <div class="flex flex-col pb-3">
          <h2
            *ngIf="blogForm.get('title')?.value"
            class="text-[26px] py-2 leading-[31px] font-[700] text-[#000]"
          >
            {{ blogForm.get("title")?.value }}
          </h2>
          <div class="flex items-center gap-3.5 py-2">
            <p
              class="m-0 text-[14px] leading-[16px] italic text-[#000] font-[600]"
            >
              {{ today | date : "MMM d, y" }}
            </p>
            <p class="m-0 text-[14px] leading-[16px] text-[#000] font-[600]">
              By {{ userName$ | async | titlecase }}
            </p>
          </div>
        </div>
        <div class="blog-content" [innerHTML]="blogContent"></div>
      </div>

      <div class="max-w-[900px] mx-auto py-3">
        <p class="text-[14px] leading-[16px] text-[#000] font-[600] italic">
          Share this:
        </p>
        <div class="flex items-center gap-3 pt-4">
          <a href="">
            <svg
              width="33"
              height="33"
              viewBox="0 0 33 33"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16.1223 3.02292C12.7354 3.02298 9.48016 4.33483 7.03965 6.68319C4.59913 9.03155 3.16302 12.2339 3.03267 15.6183C2.90231 19.0026 4.08783 22.3059 6.34047 24.8351C8.59311 27.3642 11.7378 28.9226 15.1146 29.1832V19.1453H12.0917C11.8245 19.1453 11.5682 19.0391 11.3792 18.8501C11.1902 18.6612 11.0841 18.4049 11.0841 18.1376C11.0841 17.8704 11.1902 17.6141 11.3792 17.4251C11.5682 17.2361 11.8245 17.13 12.0917 17.13H15.1146V14.1071C15.1158 13.0385 15.5409 12.014 16.2965 11.2584C17.0521 10.5028 18.0766 10.0777 19.1452 10.0765H21.1604C21.4277 10.0765 21.684 10.1827 21.873 10.3716C22.0619 10.5606 22.1681 10.8169 22.1681 11.0841C22.1681 11.3514 22.0619 11.6077 21.873 11.7967C21.684 11.9856 21.4277 12.0918 21.1604 12.0918H19.1452C18.6109 12.0924 18.0986 12.3049 17.7208 12.6827C17.343 13.0605 17.1305 13.5728 17.1299 14.1071V17.13H20.1528C20.42 17.13 20.6763 17.2361 20.8653 17.4251C21.0543 17.6141 21.1604 17.8704 21.1604 18.1376C21.1604 18.4049 21.0543 18.6612 20.8653 18.8501C20.6763 19.0391 20.42 19.1453 20.1528 19.1453H17.1299V29.1831C20.5067 28.9226 23.6514 27.3642 25.904 24.8351C28.1566 22.3059 29.3421 19.0026 29.2118 15.6183C29.0814 12.2339 27.6453 9.03157 25.2048 6.68321C22.7643 4.33484 19.5091 3.02299 16.1223 3.02292Z"
                fill="black"
              />
            </svg>
          </a>
          <a href="">
            <svg
              width="33"
              height="33"
              viewBox="0 0 33 33"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M31.037 7.03718C30.91 6.86726 30.7326 6.74177 30.5301 6.6786C30.3275 6.61543 30.1102 6.61781 29.9091 6.68539C28.6731 7.10103 27.3886 7.35566 26.0875 7.44296C25.3529 6.40884 24.3117 5.63195 23.1112 5.22226C21.9107 4.81256 20.6117 4.79082 19.3982 5.16011C18.1846 5.52941 17.118 6.27102 16.3492 7.27998C15.5804 8.28895 15.1484 9.51415 15.1144 10.7822C13.1482 10.383 11.2815 9.59542 9.62372 8.46554C7.96589 7.33566 6.55027 5.88624 5.45982 4.20221C5.35401 4.03963 5.20352 3.91105 5.02642 3.8319C4.84933 3.75275 4.65315 3.7264 4.46144 3.75601C4.26974 3.78562 4.09065 3.86994 3.94569 3.99884C3.80073 4.12773 3.69606 4.29573 3.64423 4.48266C2.75871 7.68353 2.82125 11.0726 3.82428 14.2386C4.8273 17.4047 6.72768 20.2115 9.2948 22.3186C7.13469 23.5074 4.71553 24.1472 2.25012 24.1817C2.02801 24.185 1.81322 24.2616 1.6391 24.3996C1.46498 24.5375 1.34128 24.7291 1.28719 24.9445C1.2331 25.16 1.25166 25.3873 1.33998 25.5911C1.42831 25.7949 1.58145 25.9639 1.77564 26.0717C4.30113 27.4698 7.13892 28.2072 10.0256 28.2153C12.9122 28.2234 15.7541 27.5021 18.2874 26.1183C20.8207 24.7344 22.9634 22.733 24.5164 20.2997C26.0694 17.8664 26.9824 15.0802 27.1707 12.1997C28.6745 11.0938 29.9868 9.74891 31.0555 8.2185C31.1772 8.04472 31.2409 7.83697 31.2376 7.62485C31.2343 7.41273 31.1641 7.20707 31.037 7.03718Z"
                fill="black"
              />
            </svg>
          </a>
        </div>
      </div>
    </div>

    <div [class.hidden]="preview" class="naiparq-blog-create__editor">
      <form [formGroup]="blogForm" class="flex flex-col gap-1.5">
        <div class="flex flex-row items-center gap-2 w-full">
          <div class="flex flex-col py-2 gap-1.5 w-[75%]">
            <label class="text-base" for="bTitle">Blog title</label>
            <input
              formControlName="title"
              class="py-1 px-3 rounded-lg w-full"
              type="text"
              id="bTitle"
            />
          </div>
          <div class="flex flex-col py-2 gap-1.5 w-[25%]">
            <label class="text-base" for="bTitle">Company name</label>
            <select
              class="form-select border-0"
              aria-label="Default select example"
              formControlName="company"
            >
              <option *ngFor="let firm of firms$ | async" value="{{ firm.id }}">
                {{ firm.name }}
              </option>
            </select>
          </div>
        </div>
        <div class="flex flex-col py-2 gap-1.5">
          <label class="text-base" for="bTitle">Cover Image</label>
          <div
            (click)="clickCoverImg()"
            class="img-box flex justify-center items-center w-[100%] h-[100px] rounded-lg border-dashed border-2 bg-sky-100 border-sky-400"
          >
            <p *ngIf="!coverImageName" class="font-[700] text-base">
              Drag & Drop or <span class="text-sky-500">Browse</span>
            </p>
            <p
              *ngIf="coverImageName"
              class="font-[700] text-base flex items-center gap-2"
            >
              {{ coverImageName }}
              <svg
                (click)="resetCoverImg()"
                class="cursor-pointer"
                width="30"
                height="30"
                viewBox="0 0 30 30"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M19.6875 11.6813L16.3219 15L19.6875 18.3188C19.7812 18.4064 19.8559 18.5124 19.9069 18.6302C19.958 18.7479 19.9843 18.8748 19.9843 19.0031C19.9843 19.1314 19.958 19.2584 19.9069 19.3761C19.8559 19.4938 19.7812 19.5998 19.6875 19.6875C19.5999 19.7744 19.496 19.8431 19.3818 19.8898C19.2676 19.9364 19.1453 19.9601 19.0219 19.9594C18.776 19.9583 18.5403 19.8607 18.3657 19.6875L15 16.3219L11.6813 19.6875C11.5067 19.8607 11.271 19.9583 11.025 19.9594C10.9016 19.9601 10.7793 19.9364 10.6651 19.8898C10.5509 19.8431 10.447 19.7744 10.3594 19.6875C10.1848 19.5119 10.0868 19.2742 10.0868 19.0266C10.0868 18.7789 10.1848 18.5413 10.3594 18.3656L13.6782 15L10.3594 11.6813C10.2058 11.5019 10.1256 11.2712 10.1347 11.0353C10.1438 10.7993 10.2416 10.5755 10.4086 10.4085C10.5755 10.2416 10.7993 10.1438 11.0353 10.1347C11.2712 10.1255 11.5019 10.2058 11.6813 10.3594L15 13.6781L18.3188 10.3594C18.4056 10.2695 18.5092 10.1976 18.6238 10.1478C18.7384 10.098 18.8617 10.0712 18.9866 10.069C19.1115 10.0669 19.2356 10.0893 19.3519 10.1351C19.4681 10.1809 19.5742 10.2491 19.6641 10.3359C19.754 10.4227 19.8259 10.5264 19.8757 10.641C19.9255 10.7555 19.9523 10.8788 19.9544 11.0037C19.9566 11.1287 19.9342 11.2528 19.8884 11.369C19.8426 11.4853 19.7743 11.5914 19.6875 11.6813V11.6813ZM24.2813 24.2813C22.4457 26.1167 20.107 27.3666 17.561 27.8729C15.0151 28.3792 12.3761 28.1192 9.97795 27.1258C7.57975 26.1324 5.52998 24.4501 4.08784 22.2917C2.64571 20.1334 1.87598 17.5958 1.87598 15C1.87598 12.4042 2.64571 9.86665 4.08784 7.70828C5.52998 5.54992 7.57975 3.86765 9.97795 2.87422C12.3761 1.88078 15.0151 1.62078 17.561 2.1271C20.107 2.63342 22.4457 3.88333 24.2813 5.71876C25.5002 6.93754 26.4671 8.38449 27.1268 9.97698C27.7864 11.5695 28.126 13.2763 28.126 15C28.126 16.7237 27.7864 18.4305 27.1268 20.023C26.4671 21.6155 25.5002 23.0625 24.2813 24.2813V24.2813ZM22.9594 7.04063C21.3845 5.4712 19.3799 4.40362 17.1987 3.9727C15.0175 3.54178 12.7575 3.76684 10.7041 4.61948C8.65067 5.47211 6.89597 6.91407 5.66153 8.76328C4.42709 10.6125 3.76828 12.786 3.76828 15.0094C3.76828 17.2328 4.42709 19.4063 5.66153 21.2555C6.89597 23.1047 8.65067 24.5466 10.7041 25.3993C12.7575 26.2519 15.0175 26.477 17.1987 26.0461C19.3799 25.6151 21.3845 24.5476 22.9594 22.9781C24.0082 21.933 24.8404 20.691 25.4082 19.3236C25.976 17.9561 26.2683 16.49 26.2683 15.0094C26.2683 13.5287 25.976 12.0626 25.4082 10.6952C24.8404 9.32771 24.0082 8.08579 22.9594 7.04063V7.04063Z"
                  fill="#004445"
                />
              </svg>
            </p>
            <input
              #coverImgInput
              (change)="inputCoverImg($event)"
              accept="image/*"
              type="file"
              class="hidden"
            />
          </div>
        </div>
        <ckeditor
          [(ngModel)]="blogContent"
          [ngModelOptions]="{ standalone: true }"
          #editor
          [editor]="Editor"
          (ready)="onReady($event)"
          data=""
        ></ckeditor>
        <button
          (click)="onSubmit()"
          [class.btn-loading]="submitting"
          class="px-5 max-w-[200px] naiparq-btn my-2 py-2 border-0 bg-[#000] rounded text-[#fff]"
        >
          <span class="btn-text text-[#fff] font-[700]">Submit</span>
        </button>
      </form>
    </div>
  </div>
</div>
